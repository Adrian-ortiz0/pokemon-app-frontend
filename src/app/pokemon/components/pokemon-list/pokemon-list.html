<div class="max-w-4xl mx-auto p-6">
  <div class="flex items-center justify-between mb-8">
    <h2 class="text-3xl font-bold">Pokédex</h2>
    <div class="badge badge-outline gap-2 p-4">
      @if (isSearching()) {
        Resultados: {{ displayedPokemon().length }}
      } @else {
        Total: {{ pokemonList().length }} capturados
      }
    </div>
  </div>

  @if (pokemonList().length === 0 && !isSearching()) {
    <div class="flex flex-col items-center justify-center min-h-100 bg-base-200 rounded-3xl border-2 border-dashed border-base-300">
      <span class="loading loading-dots loading-lg text-primary"></span>
      <p class="mt-4 text-sm font-medium opacity-60">Cargando...</p>
    </div>
  } @else if (isSearching() && displayedPokemon().length === 0) {
    <div class="flex flex-col items-center justify-center min-h-100 bg-base-200 rounded-3xl border-2 border-dashed border-base-300">
      <p class="text-xl font-semibold">No se encontró ningún Pokémon</p>
    </div>
  } @else {
    <div class="card bg-base-100 shadow-xl border border-base-200">
      <div class="overflow-x-auto">
        <table class="table table-zebra w-full">
          <thead class="bg-base-200">
            <tr>
              <th class="w-20">#</th>
              <th>Pokémon</th>
              <th class="text-center">Acciones</th>
            </tr>
          </thead>
          <tbody>
            @for (p of displayedPokemon(); track p.id) {
              <tr class="hover:bg-base-200 transition-colors group">
                <th class="text-gray-400 font-mono text-xs">{{ p.id }}</th>
                
                <td>
                  <div class="flex items-center gap-3">
                    <div class="avatar">
                      @if (p.sprite) {
                        <img [src]="p.sprite" class="rounded-full w-8 h-8" alt="sprite" />
                      } @else {
                        <div class="bg-neutral text-neutral-content rounded-full w-8 h-8 flex items-center justify-center">
                          {{ p.name.substring(0,1) | uppercase }}
                        </div>
                      }
                    </div>
                    <span class="font-bold group-hover:text-primary transition-colors">
                      {{ p.name | titlecase }}
                    </span>
                  </div>
                </td>

                <td class="text-center">
                  <a [routerLink]="['/pokemon', p.id]" target="_blank" class="btn btn-sm btn-ghost btn-circle text-info">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                    </svg>
                  </a>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>

    @if (!isSearching()) {
      <div class="flex flex-col items-center gap-4 mt-8">
        <div class="join shadow-md">
          <button class="join-item btn btn-md px-8" (click)="prevPage()" [disabled]="offset() <= 0">«</button>
          <button class="join-item btn btn-md no-animation">Página {{ currentPage() }}</button>
          <button class="join-item btn btn-md px-8" (click)="loadMore()" [disabled]="!nextUrl()">»</button>
        </div>
      </div>
    } @else {
      <div class="flex flex-col items-center gap-2 mt-8">
        <div class="alert alert-info shadow-lg max-w-md">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <span>Mostrando resultados de búsqueda. Limpia el campo para ver la lista completa.</span>
        </div>
      </div>
    }
  }
</div>